<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
  "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
  <title>Tree Demo</title>
  <link type="text/css" rel="stylesheet"
        href="http://yui.yahooapis.com/2.7.0/build/treeview/assets/skins/sam/treeview.css">
  <script src="http://yui.yahooapis.com/2.7.0/build/yahoo-dom-event/yahoo-dom-event.js"></script>
  <script src="http://yui.yahooapis.com/2.7.0/build/treeview/treeview-min.js"></script>

  <script src="http://yui.yahooapis.com/2.7.0/build/yahoo/yahoo-min.js"></script>
  <script src="http://yui.yahooapis.com/2.7.0/build/event/event-min.js"></script>
  <script src="http://yui.yahooapis.com/2.7.0/build/connection/connection-min.js"></script>

  <script src="http://yui.yahooapis.com/2.7.0/build/json/json-min.js"></script>

  <script src="/files/javascript/jquery-1.3.2.min.js"></script>
</head>
<body>
<h1>Tree Loading Demos</h1>


<h2>Front Page Children from FitNesse</h2>

<div id="front_page_children_list">
</div>

<a onclick="front_page_children_tree_init()">Click Me</a>

<script type="text/javascript">
  var front_page_children_tree;
  function front_page_children_tree_init() {

    front_page_children_tree = new YAHOO.widget.TreeView("front_page_children_list");

    $.getJSON("/root?names&format=json",
      function(json) {
        var root = front_page_children_tree.getRoot();
        $(json).sort().each(function() {
          new YAHOO.widget.TextNode({label:this}, root, false).className = "page_name";
        });
        front_page_children_tree.render();

      }
      );
  }
</script>

<br/><br/><br/><br/><br/>

<div id="test_results" style="width:200px">
  <a onclick="check_root_pages_get_loaded()">Check Root Pages Get Loaded</a>

  <div id="pass" style="display:none;width:100%;height:100%;background-color:green">Pass</div>
  <div id="fail" style="display:none;width:100%;height:100%;background-color:red">Fail</div>
</div>

<script type="text/javascript">
  function assertEqual(expected, actual)
  {
    if (expected == actual) {
      var success_div = $('#test_results #pass');
      success_div.show();
    } else {
      var fail_div = $('#test_results #fail');
      fail_div.text("Expected: " + expected + " Actual: " + actual);
      fail_div.show();
    }
  }


  function check_root_pages_get_loaded() {
    var original_getJSON = $.getJSON;
    var pages = ['PageOne', 'PageTwo'];
    $.getJSON = function(url, callback) {
      callback(pages);
    };

    front_page_children_tree_init();
    var nodes = $('div#front_page_children_list table.page_name span.ygtvlabel');
    assertEqual(2, nodes.length);
    assertEqual("PageOne", $(nodes[0]).text());
    assertEqual("PageTwo", nodes[1].text());
    $.getJSON = original_getJSON;
  }

</script>

<h2>Example Tree</h2>

<div id="treeDiv1">
  <ul>
    <li>List 0
      <ul>
        <li>List 0-0
          <ul>
            <li>item 0-0-0</li>
            <li>item 0-0-1</li>
          </ul>
        </li>
      </ul>
    </li>
    <li>item 0-1
      <ul>
        <li><a target="_new" href="www.elsewhere.com" title="go elsewhere">elsewhere</a>
          <ul>
            <li>item 0-1-0</li>
            <li>item 0-1-1</li>
          </ul>
        </li>
      </ul>
    </li>
  </ul>
</div>

<a onclick="treeInit();">Initialize Tree</a>

<script type="text/javascript">
  var tree;
  function treeInit() {
    tree = new YAHOO.widget.TreeView("treeDiv1");
    tree.render();
  }

</script>
</body>
</html>